[toc]

SQL Server 2008 数据库是存放表和视图、索引、存储过程和触发器等数据库对象的逻辑实体，从逻辑角度组织与管理数据。

## 数据库文件类型

在 SQL Server 中，数据库是由 **数据文件** 和 **事务日志文件** 组成的。
一个数据库 **至少应该包含一个数据文件和一个事务日志文件**。

SQL Server 2008 数据库具有以下 3 种类型的文件：

- **主数据文件**
 	- 主数据文件是数据库的起点，其中包含数据库的厨师信息，记录数据库所拥有的文件指针。
	- 每个数据库 **有且仅有一个主数据文件**，这是数据库必需的文件。
	- 主数据文件的扩展名是 `.mdf`。
- **辅助数据文件**
	- 除主数据文件以外的所有其他数据文件都是 **辅助数据文件**。
	- 辅助数据文件存储主数据文件未存储的所有其他数据和对象，它不是数据库必需的文件。
	- 当一个数据库需要存储的数据量很大时，可以用辅助数据文件来保存主数据文件无法存储的数据，
	- 辅助数据文件可以分散存储在不同的物理磁盘中，从而提高数据的读/写效率。
	- 辅助数据文件的扩展名是 `.ndf`。
- **日志文件**
	- 在 SQL Server 2008 中，每个数据库 **至少拥有一个自己的日志文件**。
	- 日志文件最小是 **1MB**。
	- 日志文件的扩展名是 `.ldf`。

在创建数据库的时候，日志文件也会随着被创建。
在 SQL Server 中，用户还可以指定数据文件的大小能够自动增长。
在定义数据文件时，指定一个特定的增量，每次扩大文件按时均按此增量来增长。
每个文件的大小可以指定一个最大值，当文件大小达到最大值使就不再增长。
如果没有指定文件最大值，文件可以一直增长到 **磁盘没有可用空间** 为止。

### 数据库文件组

为了有助于数据布局和管理任务，SQL Server 2008 允许用户将多个文件划分为一个文件集合。
这些文件可以在不同的磁盘上，并为这一集合命名，这就是文件组。

- 主文件组
	- 主文件组是包含主要文件的文件组。
	- 所有系统表和没有明确分配给其他文件组的任何文件都被分配到主文件组中。
	- 一个数据库 **只有一个主文件组**。
- 用户定义文件组
	- 用户定义文件组是用户首次创建数据库时或修改数据库时自定义的。
	- 目的是为了将数据存储进行合理的分配，以提高数据的读/写效率。
- 默认文件组
	- 每个数据库中均有一个文件组被指定为默认文件组。
	- 如果在数据库中创建对象时没有指定对象所属的文件组，对象将被分配给默认文件组。
	- 在任何时候，**只能将一个文件组指定为默认文件组**。
	- 说明
		- 默认文件组中的文件必须足够大，能够容纳未分配给其他文件组的所有新对象。
		- 荣国没有指定默认文件组，则将主文件组作为默认文件组。
		- `PRIMARY` 文件组是默认文件组。
