[toc]

## UML 模型系统体系结构

**UML** 是一种 **通用建模语言**。

### UML 的诞生与发展

略

### UML 的特点

- 统一标准
- 面向对象
- 可视化、表达能力强
- 独立于过程
- 易掌握、易用。

### 软件系统体系结构的描述

- **用例视图**
	- 作用：描述系统的功能需求，找出用例和执行者。
	- 适用对象：客户、分析者、设计者、开发者和测试者。
	- 描述用图：用例图和活动图。
- **逻辑视图**
	- 作用：描述如何实现系统内部的功能。
	- 适用对象：分析者、设计者、开发者。
	- 描述用图：类图和对象图、状态图、顺序图、合作图和活动图。
- **构件视图**
	- 作用：描述系统代码构件组织和实现模块以及它们之间的依赖关系。
	- 适用对象：设计者、开发者。
	- 描述用图：构件图。
- **进程视图**
	- 作用：描述系统的并发性，并处理这些线程间的通信和同步。
	- 适用对象：开发者和系统集成者。
	- 描述用图：状态图、顺序图、合作图、活动图、构件图和配置图。
- **配置视图**
	- 作用：描述系统的物理设备配置，如计算机、硬件设备以及它们相互间的连接。
	- 适用对象：开发者、系统集成者和测试者。
	- 描述用图：配置图。

UML 的软件以用例为中心，以系统体系结构为主线，采用循环、迭代、递增的方式进行系统开发。

### UML 模型元素

UML 利用若干视图从不同角度来描述一个系统。
每种视图由若干幅模型图进行描述，每幅模型图由若干个模型元素来描述。

![UML 模型元素符号](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/umlmoxingfuhao.png)

模型元素与模型元素之间的连接关系也是模型元素。
常见的关系有 **关联**、**泛化**、**依赖** 和 **聚合**。

![UML 关系符号](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/umlguanxifuhao.png)

- 关联：连接模型元素及连接实例。
- 依赖：表示一个元素以某种方式依赖于另一个元素。
- 泛化：表示一般与特殊的关系。
- 聚合：表示整体与部分的关系。

## UML 系统模型与建模

UML 分析和设计模型由 *三大类 10 种图* 表示。

- **用例模型图**
	- **用例图**
- **静态模型图**
	- **类图、对象图、包图、构件图和配置图**
- **动态模型图**
	- **活动图、顺序图、状态图和合作图**

### 用例模型及组成成分

**用例模型** 描述的是 **外部执行者** 所理解的系统功能。

- 主要用于 *需求分析阶段*。
- 用例图符号：
	- 使用一个 **方框** 代表 **系统**。
	- 方框中的 **椭圆符号** 代表 **用例**。
	- 方框外的 **人形符号** 代表执行者。
	- 人形符号和椭圆符号之间的关系由一条 **直线（连接线）** 表示。

![用例图](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/yonglitu.png)

### 静态模型与系统体系结构建模

UML 静态模型用于描述系统体系结构。

#### 类图

**类图** 是用类和它们之间的关系描述系统的一种图示。

- 展示系统中类的静态结构和类与类之间的相互联系。
- 表示一个系统的 *逻辑结构*。

> 一个系统的类模型可以由多张类图描述，一个类也可以出现在几张类图中。

![类图](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/leitu.png)

**类** 是面向对象模型最基本的模型元素。
分为 *长式* 和 *短式*。

- 长式由 **类名**、**属性** 及 **操作** 三部分。
	- 类及类型名均用英文大写字母开头。
	- 属性及操作名为小写字母开头。
	- 属性的常见类型：`char`/`boolean`/`double`/`float`/`integer`/`object`/`short`/`string` 等。

> 类图符号中的属性 *只注明类型而不能有具体值*。

- 短式只有类名一个部分。

#### 对象图

**对象** 是类的 **实例**。
对象图分为 *长式* 和 *短式*。

对象图中使用的符号与类图几乎完全相同。

- 只不过对象图符号中的对象名加了 **下划线** 表示 **对象名**。
- 对象名后面可以接 **冒号和类名** 表示创建该对象的类。
- 属性要有具体值。

![对象图](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/duixiangtu.png)

#### 包图

**包** 由关系密切的一组模型元素构成。
包还可以由其他包嵌套构成。

- 包就是将许多类集合成一个更高层次的单位。
- 形成 *高内聚、低耦合* 的类的集合。
- 引用包是为了降低系统的复杂性。
- 包图是维护和控制系统总体结构的重要建模工具。
- 包图的实例没有任何语义（含义），仅在模型执行期间包才有意义。
- 包由一个 **矩形** 和在其左上方的一个 **小矩形** 组成。
	- 小矩形里标明 **包名**。
	- 矩形用来描述包的 **内容**。

![包图](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/baotu.png)

> 包有时又称为 **子系统**。

#### 构件图

**构件图** 又称为 **组件图**，显示代码本身的逻辑结构。
描述系统中存在的软件构件以及它们之间的依赖关系。

- 构建图中的元素有 **构件**、**依赖关系** 和 **界面**。

![构件图](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/goujiantu.png)

#### 配置图

**配置图** 描述了系统中硬件和软件的物理配置情况和系统体系结构。
显示系统运行时刻的结构。

![配置图](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/peizhitu.png)

- 配置图的元素有 **结点** 和 **连接**。
- 简单结点是指实际的物理设备以及在该结点上运行的构件或对象。
- 结点代表计算机资源，通常是某种硬件。
- 结点应标注 **名字**。
- 结点之间的联系用 **连线** 表示，在连线上要标注 **通信类型**。

### 动态模型与行为控制流建模

动态模型主要是描述系统的动态行为和控制结构。

#### 顺序图

**顺序图** 用来描述对象之间动态的交互关系，***着重体现对象间消息传递的时间顺序***。

![顺序图](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/shunxutu.png)

- 顺序图存在两个轴：**水平轴** 表示不同的 **对象**，**垂直轴** 表示 **时间**。
- 其中，对象用一个带有 **垂直虚线** 的矩形框表示，并标有 **对象名和类名**。
	- 垂直虚线是对象的 **生命线**，表示在某段时间内对象是存在的。
- 表示消息的箭头类型指明了消息的类型。
	- 在消息箭头线的上方可以标明传递的 *消息顺序号、名称、内容和要求返回的信息*。
	- "\*" 号表示重复发送消息。
- 当收到消息时，接受消息的对象立即开始执行活动，即该对象被 **激活** 了。
	- 通过在对象生命线上显示一个 **细长矩形框** 来表示对象的激活状态。

#### 合作图

**合作图** 也称为 **协作图**，用于描述相互合作的对象间的交互关系和连接关系。

- 除了说明消息的交换外，还显示对象之间的连接关系。
- 顺序图和合作图都可以用来表示对象间的协作关系。
	- **顺序图强调时间和顺序**。
	- **合作图强调对象间的相互关系**。

![合作图](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/hezuotu.png)

- **消息箭头** 表示对象间的消息流向。
	- 消息箭头必须附加 **标记** 说明消息发送的先后顺序。
	- 还可以显示条件，重复和返回值等。

#### 状态图

**状态图** 用来描述一个特定对象的所有可能的状态及其引起状态迁移的事件。
只有那些具有 **个数有限、意义明确的状态的类**，并且其 **行为受不同状态的影响而发生改变**，这些类才需要画状态图。

- 事件：一条消息或是满足了某些条件。
- 状态迁移：状态的改变称为迁移。
- 迁移动作：与状态迁移相关的动作，指出状态迁移时应该做什么。

![状态图符号元素](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/zhuangtaitutufuyuansu.png)

![状态图](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/zhuangtaitu.png)

#### 活动图

**活动图** 由状态图变化而来。

- 状态图着重描述对象的状态变化以及触发状态变化的时间。
- 交互模型（顺序图和合作图）描述对象之间的动态交互行为。
- 活动图描述系统中各种活动的执行顺序，刻画一个方法中所要进行的各项活动能够的执行流程。

活动图可以用来描述 *操作的行为*、*用例和对象内部的工作过程*、*表示并行过程*。

- 着重描述操作实现中完成的工作以及用例或对象内部的活动。
- 当某个活动结束后将立即进入下一个活动。

活动图的模型元素有 **活动**、**迁移**、**对象**、**信号**、**泳道** 等。

![活动图符号元素](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/huodongtutufuyuansu.png)

![活动图](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/huodongtu.png)

## UML 系统体系结构模型

### 子系统组织的系统体系结构

**子系统** 是描述系统某个行为的相对独立的抽象单位。
每个子系统都有自己的接口，通过接口各个子系统相互交换信息，协同工作。

子系统一般用包图符号元素加上在包名框内标注 **构造型 `<<subsystem>>`** 表示，也可以用右上角带有 **分支图形** 的包图符号元素表示。

![子系统](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/zixitong.png)

如果采用由子系统包来描述系统的体系结构图，其最底层（叶节点）元素必须由 **模型包** 描述。

### 系统模型组织的系统体系结构

系统可以由一组模型来描述。
模型可以从不同的角度和不同的抽象层次建立。

在 UML 中，系统模型一般用 **右上角** 带有 **三角形** 的包图符号元素表示，并且可以在模型名上标注 **构造型 `<<Model>>`**。
在带三角形的包名框中标明 **构造型 `<<systemModel>>`** 说明它是一个系统模型。

![模型图](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/moxingtu.png)

### 系统体系结构模型的描述方式

在 UML 中，一个系统体系结构层次可以有两种描述方式：

- 基于模型的系统体系结构层次
	- 所有元素都由系统模型组成。
- 基于子系统的系统体系结构层次
	- 元素由子系统组成，但最底层的元素必须由系统模型组成。

## UML 的扩展、调整机制

UML 中扩展机制包括三种：**构造型**、**标记值** 和 **约束**。

- 构造型用于对模型元素进行分类。
- 标记值也称特性规格说明。
- 与约束直接对某个模拟元素附加一些性质和语义。

### 模型元素的分类与标记

**构造型** 提供了在对象模型层次上的模型元素的分类方式。

- 一个模型元素只能有一个构造型。
- 对象类共享它的基类的属性、操作和关联，并且还可以拥有自己独有的约束和附加的标记值。

构造型的表达方式：

- 由 **双尖括号** 中的字符串表示构造型。
- 构造型一般与类名写在一起。
- 构造型也可作为类内操作的分类标识。

为便于使用，UML 预定义了一批标准的构造型。
这里只举出常用的一些构造型：

- `<<extends>>`：用于依赖，说明目标用例在给定的扩展点扩展了源用例的行为。
- `<<include>>`：用于依赖，说明源用例具有与目标用例相同的行为。
- `<<interface>>`：用于对象类，说明一个用于定义服务的操作集合。
- `<<actor>>`：用于对象类，说明一组用户与用例交互的角色。
- `<<stereotype>>`：用于分类符，说明该分类符是一个构造型。
- `<<system>>`：用于包，说明一个包代表一个将建立模型的完整的系统。

### 模型元素的特性规格说明

**标记值** 是特性规格说明，用来描述模型元素的特性：

- 标记名用 **字符串** 表示。
- 用 **等号 "="** 给标记赋值。
- 一个模型元素可以有多个标记值描述其特性。
- 一组标记和所赋的值用等号相连，放在 **花括号 "{}"** 中。
- 标记值一般在类名后面书写。

![有构造型类图](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/yougouzaoxingleitu.png)

### 模型元素的语义扩展与约束

**约束** 扩展了模型元素的语义。

- 约束规定某个条件或命题必须保持为真，否则该模型表示的系统无效。
- 约束由放在 **花括号 "{}"** 中的一个文字串表示。
- 对于单个模型元素可以将约束写在其附近。
- 对于两个模型元素之间的约束，可以写在两元素之间的 **虚箭头线** 上。

![有约束类图](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/youyueshuleitu.png)

## UML 与面向对象的软件开发统一过程

软件开发 **统一过程** 实际是一种二维结构的软件的软件开发过程。

- *横轴* 是时间，将软件的开发过程即生命周期划分为
	- 开始、详细规划、系统构造和移交四个阶段以及一系列的循环重复（*迭代*）。
- *纵轴* 是过程包含的成分，即项目开发过程包括的具体工作内容。

![面向对象统一过程](http://oxnec2zdn.bkt.clouddn.com/organicchemistry/mianxiangduixiangtongyiguocheng.png)

### UML 支持迭代、递增式的软件开发过程

面向对象的软件开发统一过程从 *时间* 顺序看是一个迭代的递增式的开发过程。

- 每一次迭代都要编写相应的文档，进行正式的评审，并提交相应的软件。
- 所提交的软件可能是作为中间结果的内部版本，也可能是给用户的一个早期软件版本。
- 每一次迭代都包含了分析、设计、实现和测试等各个阶段。

#### 开始阶段

开始阶段主要是确定项目的范围和目标，并进行可行性分析。

- 理解问题领域的各种业务过程及其之间的关系。
- 考虑和分析项目的成本及可能得到的效益和风险。
- 明确待开发项目的意义和价值。
- 确定是否要开发此项目。

#### 详细规划阶段

详细规划阶段的主要任务是在开始阶段工作基础上，收集更详细的系统需求，进行高层次的系统分析和系统设计。

- 对开发项目的问题领域和功能作详细分析，画出用例图。
- 建立系统的基础体系结构。
- 进行风险分析，并制定相应的对策。
- 制定开发计划。

制定开发计划实际上是为系统构造阶段制定迭代开发的顺序。
包括：

- 用例分类
	- 将用例的优先级分为三级
	- 体系结构方面的风险分为三级
	- 进度风险分为三级
- 确定每次迭代的开发周期
	- 迭代周期：对整个项目可制定固定的迭代周期，以便定期提交产品。
	- 迭代周期的长短：由项目的大小、开发的要求以及开发人员的多少和经验等因素决定。
	- 迭代次数：整个项目的迭代次数不宜过多，通常以 3 ~ 5 次为宜。
- 将用例分配到各次迭代中
	- 通常具有高优先级、高体系结构风险和高进度风险的用例应尽早实现。

#### 系统构造阶段

系统构造阶段是迭代、递增地建造系统的过程。
通过若干次迭代、循环、重复的工作具体建造软件系统。
每次迭代可看作开发一个小项目，它应包含分析、设计、实现、测试全过程。

#### 移交阶段

移交阶段一般不再开发新的功能。
该阶段的工作主要有系统测试、产品包装、用户培训等。

### 软件开发步骤及核心支持活动

UML 开发过程中的核心活动成分就是进行软件项目开发时要执行的活动的一般描述。
主要步骤是 *分析、设计、实现、测试、配置和一些核心支持活动* 等。

### UML 软件开发过程产生的模型与文档

UML 开发过程的产物是软件开发的结果，每一个活动能够都有相应的产物。

- 既是当前活动的结果，也是下一个活动的输入和依据。
- UML 的最终产物就是最后提交的 **可执行的软件系统** 和相应的 **软件文件资料**。

UML 开发过程的产物包括两大类：**模型和文档**

#### 模型

UML 开发过程产生 9 种模型：

- **业务模型**
	- 建立问题领域的组织结构和业务流程的抽象。
	- 描述方式：需求分析规格说明书
- **领域模型**
	- 建立问题领域的需求分析说明。
	- 描述方式：需求分析规格说明书
- **用例模型**
	- 表达系统的功能。
	- 描述方式：用例图、活动图及需求分析规格说明书
- **分析模型**
	- 只有复杂的系统才需要建立独立的分析模型。
	- 包括：
		- 基本功能分析。
		- 实现功能的对象。
		- 对象之间的关系。
- **设计模型**
	- 系统具体解决方案，由调整和完善分析模型而成。
	- 描述方式：类图、对象图、包图、顺序图、合作图、状态图和活动图
- **进程模型**
	- 描述系统并发和同步机制。
	- 有多线程的并发系统才建立进程模型。
	- 描述方式：状态图、顺序图、合作图、活动图、构件图和配置图
- **实现模型**
	- 软件的系统体系结构。
	- 描述方式：包图和构件图
- **配置模型**
	- 描述系统软件在各个硬件上的配置。
	- 描述方式：配置图
- **测试模型**
	- 描述验证系统功能的途径。
	- 描述方式：测试案例和测试报告

#### 文档

文档资料是 UML 开发过程所获得的信息集，包括技术文档和管理文档。

- **技术文档**
	- 需求分析信息集：软件需求规格说明书、需求补充说明、业务用例图等。
	- 设计信息集：软件设计规格说明书、图形界面、类图、对象图、包图、顺序图、合作图、状态图和活动图等。
	- 实现信息集：源程序清单、动态链接库说明、用户使用手册、构件图等。
	- 配置信息集：配置图集详细说明。
- **管理文档**
	- 风险分析说明、软件开发进度计划、配置计划、测试计划、测试方案与步骤等。

### UML 软件开发过程的基本特征

基本特征：*以用例驱动开发过程，以系统体系结构为中心，以质量控制和风险管理为目标，采用反复（迭代、循环）、递增式的螺旋上升式开发过程*。
