[toc]

## 符号对象

### 符号对象的建立

- `sym` 函数：用于建立单个符号对象。
    - 调用格式：`符号对象名 = sym(A)`
    - 当 `A` 是一个数值常量、数值矩阵或数值表达式时，**不加单引号**，此时符号对象为一个 **符号常量**。
    - 当 `A` 是一个变量名，**需要加单引号**，此时符号对象为一个 **符号变量**。

```matlab
sin(sym(pi / 3))
sin(pi / 3)

a = 5; b = -8;
x = sym('a'); y = sym('b');
w = (a+b) * (a-b)
s = (x+y) * (x-y)

eval(s)
```

- `syms` 命令：用于建立多个符号变量。
    - 调用格式：`syms 符号变量名1 符号变量名2 ... 符号变量名n`
    - 变量名 *不能加单引号*，相互之间用空格隔开。

### 符号对象的运算

- 四则运算
    - 与数值计算一样，用相应的运算符实现，但运算结果仍然是一个 *符号表达式*。
- 关系运算
    - 六种关系运算符：`<` `>` `<=` `>=` `==` `~=`
    - 对应的六个函数：`lt()` `le()` `gt()` `ge()` `eq()` `ne()`
    - 若参与运算的是 *符号表达式*，其结果是一个 **符号关系表达式**。
    - 若参与运算的是 *符号矩阵*，其结果是由符号关系表达式构成的矩阵。
- 用 `assume` 函数对符号对象设置 **值域**。
    - 调用格式 1：`assume(condition)`
        - 指定变量满足条件 `condition`。
    - 调用格式 2：`assume(expr, set)`
        - 指定表达式 `expr` 属于集合 `set`。
- 逻辑运算
    - 三种逻辑运算符：`&` `|` `~`
    - 四个逻辑运算函数：`and()` `or()` `not()` `xor()`
- 因式分解与展开运算
    - `factor(s)`：因式分解。
        - 还可以进行质因解。
    - `expand(s)`：进行展开。
    - `collect(s)`：合并同类项。
    - `collect(s, v)`：按变量 `v` 合并同类项。
- 其他运算
    - 提取有理分式的分子分母：`[n, d] = numden(s)`
    - 提取符号表达式的系数：`c = coeffs(s, x)`
    - 符号表达式化简：`simplify(s)`
    - 符号多项式与多项式系数向量之间的转换：
        - 符号多项式转换为多项式系数向量：`p = sym2poly(s)`
        - 多项式系数向量转换为符号多项式：`s = poly2sym(p)`

例：求方程 $latex ax^2 + bx + c = 0$ 的根。

```matlab
syms a b c x;
f = a*x^2 + b*x + c;
g = coeffs(f, x);
g = g(end: -1: 1);
roots(g)
```

- 符号运算中变量的确定
    - 如果没有确定指定自变量：
        - 寻找除 i、j 外，在字母顺序上 *最接近 x* 的小写字母。
        - 若表达式中有两个符号变量与 x 的距离相等，则 ASCII 码大者优先。
    - `symvar()` 函数可以用于查找一个符号表达式中的符号变量。
        - 调用格式：`symvar(s, n)`
        - 函数返回符号表达式 `s` 中的 `n` 个符号变量。
        - 若 `n` 小于变量总个数，则按优先级返回相应数量的变量。
        - 若没有指定，则直接返回所有变量。

### 符号矩阵

符号矩阵也是一种符号表达式，所以符号表达式运算都可以在矩阵意义下进行。
注意：这些函数作用于符号矩阵时，是 *分别作用于矩阵的每一个元素*。

由于句号矩阵仍然是矩阵，故所有矩阵计算均适用。

例：当 $latex \lambda$ 取何值时，以下齐次线性方程组有非零解。

\begin{cases}
(1 - \lambda)x_1 - 2x_2 + 4x_3 = 0 \\\\
2x_1 + (3 - \lambda)x_2 + x_3 = 0 \\\\
x_1 + x_2 + (1 - \lambda)x_3 = 0
\end{cases}

```matlab
syms lambda;
A = [1-lambda, -2, 4; 2, 3-lambda, 1; 1; 1; 1-lambda];
D = det(A);
factor(A)
```

## 符号微积分

### 符号函数的极限

- 调用格式：`limit(f, x, a)`
- 求函数 `f` 关于变量 `x` 在 `a` 点的极限。
- 若 `x` 省略，则采用系统默认的自变量。
- `a` 的默认值为 0。
- 求 *单边极限*：`limit(f, x, a, 'right')`、`limit(f, x, a, 'left')`

### 符号函数的导数

- 调用格式：`diff(f, x, n)`
- 求函数 `f` 关于变量 `x` 的 `n` 阶导数。
- 参数 `x` 的用法同求极限函数 `limit`。
- `n` 的默认值为 1。
- 变量多于一个时，可以求 *偏导数*。

### 符号函数的积分

- 不定积分
    - 调用格式：`int(f, x)`
    - 求函数 `f` 对变量 `x` 的不定积分。
- 定积分
    - 调用格式：`int(f, x, a, b)`
    - 求函数 `f` 对变量 `x` 在闭区间 `[a, b]` 可积时，函数返回一个定积分结果。
    - `a` 和 `b` 中有一个为 `inf` 时，函数返回一个 *广义积分*。
    - `a` 和 `b` 中有一个符号表达式时，函数返回一个符号函数。

## 级数

### 级数求和

- `symsum(s, v, n, m)`：求无穷级数的和。
    - `s` 表示一个级数的通项。
    - `v` 是求和变量，省略时使用系统的默认变量。
    - `n` 和 `m` 是求和变量 `v` 的初值和末值。

> 在级数的计算中，因为小数都表示为有理分数的形式，容易导致分子或分母出现极大整数而导致无法计算的问题。

### 泰勒级数

- 调用格式：`taylor(f, v, a, Name, Value)`
- 该函数将函数 `f` 按变量 `v` 在 `a` 点展开为泰勒级数。
- `v` 省略时按默认规则确定变量。
- `a` 的默认值是 0。
- `Name` 和 `Value` 为选项设置，前者为选项名，后者为该选项的值。
    - `ExpansionPoint`：指定展开点，对应值可以是标量或向量。未设置时，展开点为 0。
    - `Order`：指定截断参数，对应值为一个正整数。未设置时，截断参数为 6，即展开式的最高阶为 5。
    - `OrderMode`：指定展开式采用绝对阶或相对阶，对应值为 `Absolute` 或 `Relative`。默认值为 `Absolute`。

## 符号方程求解

### 代数方程符号求解

- 调用格式：
    - `solve(s)`：求解符号表达式 `s` 的代数方程，求解变量为默认变量。
    - `solve(s, v)`：求解符号表达式 `s` 的代数方程，求解变量 `v`。
    - `solve(s1, s2, ..., sn, v1, v2, ..., vn)`

例：解方程 $latex ax^2 + bx + c = 0$。

```matlab
% 方法 1
syms x y a b c;
solve(a*x^2 + b*x + c == 0)

% 方法 2
f = a*x^2 + b*x + c == 0;
solve(f)

% 方法 3
solve(a*x^2 + b*x + c)

% 方法 4
f = a*x^2 + b*x + c;
solve(f)
```

> `solve` 所得到的解不一定准确。

### 常微分方程符号求解

在 Matlab 中，用大写字母 `D` 表示导数。
例：`D3y + D2y + Dy - x + 5 = 0` 表示微分方程 $latex y''' + y'' + y' - x + 5 = 0$。

- 调用格式：`dsolve(e, c, v)` 或 `dsolve(e1, e2, ..., en, c1, c2, ..., cn, v)`
- 求解常微分方程 `e` 在初值条件 `c` 下的特解。
- 参数 `v` 是方程中的自变量。
- 若没有给出初值条件 `c`，则求方程的通解。
